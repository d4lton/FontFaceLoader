{"version":3,"file":null,"sources":["../src/FontFaceLoader.js"],"sourcesContent":["class FontFaceLoader {\n\n  constructor(url, name) {\n    this.url = url;\n    this.name = name;\n    this.alreadyLoaded = false;\n  };\n\n  load() {\n    return new Promise(function(resolve, reject) {\n      var xhr = new XMLHttpRequest();\n      xhr.responseType = \"blob\";\n      xhr.addEventListener(\"readystatechange\", function(event) {\n        if (event.target.readyState === XMLHttpRequest.DONE) {\n          if (event.target.status === 200) {\n            var reader = new window.FileReader();\n            reader.onloadend = function() {\n              if (!this.fontFaceExists()) {\n                var style = document.createElement('style');\n                style.setAttribute('FontFaceLoaderName', this.name);\n                style.appendChild(document.createTextNode('@font-face {font-family: \"' + this.name + '\"; src: url(' + reader.result + ');}'));\n                document.head.appendChild(style);\n              } else {\n                this.alreadyLoaded = true;\n              }\n              resolve(this);\n            }.bind(this);\n            reader.readAsDataURL(event.target.response); \n          } else {\n            reject('Unable to load font from ' + this.url + ', ' + event.target.status + ': ' + event.target.statusText);\n          }\n        }\n      }.bind(this), false);\n      xhr.open(\"GET\", this.url);\n      if (this.fontFaceExists()) {\n        this.alreadyLoaded = true;\n        resolve(this);\n      } else {\n        xhr.send();\n      }\n    }.bind(this));\n  };\n\n  fontFaceExists() {\n    return (document.head.querySelector('style[fontfaceloadername=\"' + this.name + '\"]') !== null);\n  };\n\n};\n\nexport default FontFaceLoader;\n"],"names":["FontFaceLoader","url","name","alreadyLoaded","Promise","resolve","reject","xhr","XMLHttpRequest","responseType","addEventListener","event","target","readyState","DONE","status","reader","window","FileReader","onloadend","fontFaceExists","style","document","createElement","setAttribute","appendChild","createTextNode","result","head","bind","readAsDataURL","response","statusText","open","send","querySelector"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA;0BAEQC,GAAZ,EAAiBC,IAAjB,EAAuB;;;SAChBD,GAAL,GAAWA,GAAX;SACKC,IAAL,GAAYA,IAAZ;SACKC,aAAL,GAAqB,KAArB;;;;;2BAGK;aACE,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;YACvCC,MAAM,IAAIC,cAAJ,EAAV;YACIC,YAAJ,GAAmB,MAAnB;YACIC,gBAAJ,CAAqB,kBAArB,EAAyC,UAASC,KAAT,EAAgB;cACnDA,MAAMC,MAAN,CAAaC,UAAb,KAA4BL,eAAeM,IAA/C,EAAqD;gBAC/CH,MAAMC,MAAN,CAAaG,MAAb,KAAwB,GAA5B,EAAiC;kBAC3BC,SAAS,IAAIC,OAAOC,UAAX,EAAb;qBACOC,SAAP,GAAmB,YAAW;oBACxB,CAAC,KAAKC,cAAL,EAAL,EAA4B;sBACtBC,QAAQC,SAASC,aAAT,CAAuB,OAAvB,CAAZ;wBACMC,YAAN,CAAmB,oBAAnB,EAAyC,KAAKtB,IAA9C;wBACMuB,WAAN,CAAkBH,SAASI,cAAT,CAAwB,+BAA+B,KAAKxB,IAApC,GAA2C,cAA3C,GAA4Dc,OAAOW,MAAnE,GAA4E,KAApG,CAAlB;2BACSC,IAAT,CAAcH,WAAd,CAA0BJ,KAA1B;iBAJF,MAKO;uBACAlB,aAAL,GAAqB,IAArB;;wBAEM,IAAR;eATiB,CAUjB0B,IAViB,CAUZ,IAVY,CAAnB;qBAWOC,aAAP,CAAqBnB,MAAMC,MAAN,CAAamB,QAAlC;aAbF,MAcO;qBACE,8BAA8B,KAAK9B,GAAnC,GAAyC,IAAzC,GAAgDU,MAAMC,MAAN,CAAaG,MAA7D,GAAsE,IAAtE,GAA6EJ,MAAMC,MAAN,CAAaoB,UAAjG;;;SAjBmC,CAoBvCH,IApBuC,CAoBlC,IApBkC,CAAzC,EAoBc,KApBd;YAqBII,IAAJ,CAAS,KAAT,EAAgB,KAAKhC,GAArB;YACI,KAAKmB,cAAL,EAAJ,EAA2B;eACpBjB,aAAL,GAAqB,IAArB;kBACQ,IAAR;SAFF,MAGO;cACD+B,IAAJ;;OA7Be,CA+BjBL,IA/BiB,CA+BZ,IA/BY,CAAZ,CAAP;;;;qCAkCe;aACPP,SAASM,IAAT,CAAcO,aAAd,CAA4B,+BAA+B,KAAKjC,IAApC,GAA2C,IAAvE,MAAiF,IAAzF;;;;IAGH,AAED;;;;"}